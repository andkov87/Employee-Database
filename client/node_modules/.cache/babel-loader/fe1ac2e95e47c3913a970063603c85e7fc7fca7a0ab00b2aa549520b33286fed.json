{"ast":null,"code":"var _jsxFileName = \"/Users/rubyzli/Desktop/employee-exercise/client/src/Pages/EmployeeList.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport Loading from \"../Components/Loading\";\nimport EmployeeTable from \"../Components/EmployeeTable\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst fetchEmployees = signal => {\n  return fetch(\"/api/employees\", {\n    signal\n  }).then(res => res.json());\n};\nconst deleteEmployee = id => {\n  return fetch(`/api/employees/${id}`, {\n    method: \"DELETE\"\n  }).then(res => res.json());\n};\nconst updateEmployee = employee => {\n  return fetch(`/api/employees/${employee._id}`, {\n    method: \"PATCH\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(employee)\n  }).then(res => res.json());\n};\nconst EmployeeList = () => {\n  _s();\n  const [loading, setLoading] = useState(true);\n  const [data, setData] = useState(null);\n  const [check, setCheck] = useState(null);\n  const handleDelete = id => {\n    deleteEmployee(id).catch(err => {\n      console.log(err);\n    });\n    setData(employees => {\n      return employees.filter(employee => employee._id !== id);\n    });\n  };\n  useEffect(() => {\n    const controller = new AbortController();\n    fetchEmployees(controller.signal).then(employees => {\n      setLoading(false);\n      setData(employees);\n    }).catch(error => {\n      if (error.name !== \"AbortError\") {\n        setData(null);\n        throw error;\n      }\n    });\n    return () => controller.abort();\n  }, []);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(EmployeeTable, {\n    employees: data,\n    onDelete: handleDelete\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 10\n  }, this);\n};\n_s(EmployeeList, \"PP+1vjJpk5oDKOBMtVC92/3/+GE=\");\n_c = EmployeeList;\nexport default EmployeeList;\nvar _c;\n$RefreshReg$(_c, \"EmployeeList\");","map":{"version":3,"names":["useEffect","useState","Loading","EmployeeTable","fetchEmployees","signal","fetch","then","res","json","deleteEmployee","id","method","updateEmployee","employee","_id","headers","body","JSON","stringify","EmployeeList","loading","setLoading","data","setData","check","setCheck","handleDelete","catch","err","console","log","employees","filter","controller","AbortController","error","name","abort"],"sources":["/Users/rubyzli/Desktop/employee-exercise/client/src/Pages/EmployeeList.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport Loading from \"../Components/Loading\";\nimport EmployeeTable from \"../Components/EmployeeTable\";\n\nconst fetchEmployees = (signal) => {\n  return fetch(\"/api/employees\", { signal }).then((res) => res.json());\n};\n\nconst deleteEmployee = (id) => {\n  return fetch(`/api/employees/${id}`, { method: \"DELETE\" }).then((res) =>\n    res.json()\n  );\n};\n\nconst updateEmployee = (employee) => {\n  return fetch(`/api/employees/${employee._id}`, {\n    method: \"PATCH\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(employee),\n  }).then((res) => res.json());\n};\n\nconst EmployeeList = () => {\n  const [loading, setLoading] = useState(true);\n  const [data, setData] = useState(null);\n  const [check, setCheck] = useState(null)\n\n  const handleDelete = (id) => {\n    deleteEmployee(id).catch((err) => {\n      console.log(err);\n    });\n\n    setData((employees) => {\n      return employees.filter((employee) => employee._id !== id);\n    });\n  };\n\n  \n  useEffect(() => {\n    const controller = new AbortController();\n\n    fetchEmployees(controller.signal)\n      .then((employees) => {\n        setLoading(false);\n        setData(employees);\n      })\n      .catch((error) => {\n        if (error.name !== \"AbortError\") {\n          setData(null);\n          throw error;\n        }\n      });\n\n    return () => controller.abort();\n  }, []);\n\n  if (loading) {\n    return <Loading />;\n  }\n\n  return <EmployeeTable employees={data} onDelete={handleDelete} />;\n};\n\nexport default EmployeeList;\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,OAAOC,OAAO,MAAM,uBAAuB;AAC3C,OAAOC,aAAa,MAAM,6BAA6B;AAAC;AAExD,MAAMC,cAAc,GAAIC,MAAM,IAAK;EACjC,OAAOC,KAAK,CAAC,gBAAgB,EAAE;IAAED;EAAO,CAAC,CAAC,CAACE,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACC,IAAI,EAAE,CAAC;AACtE,CAAC;AAED,MAAMC,cAAc,GAAIC,EAAE,IAAK;EAC7B,OAAOL,KAAK,CAAE,kBAAiBK,EAAG,EAAC,EAAE;IAAEC,MAAM,EAAE;EAAS,CAAC,CAAC,CAACL,IAAI,CAAEC,GAAG,IAClEA,GAAG,CAACC,IAAI,EAAE,CACX;AACH,CAAC;AAED,MAAMI,cAAc,GAAIC,QAAQ,IAAK;EACnC,OAAOR,KAAK,CAAE,kBAAiBQ,QAAQ,CAACC,GAAI,EAAC,EAAE;IAC7CH,MAAM,EAAE,OAAO;IACfI,OAAO,EAAE;MACP,cAAc,EAAE;IAClB,CAAC;IACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACL,QAAQ;EAC/B,CAAC,CAAC,CAACP,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACC,IAAI,EAAE,CAAC;AAC9B,CAAC;AAED,MAAMW,YAAY,GAAG,MAAM;EAAA;EACzB,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGrB,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACsB,IAAI,EAAEC,OAAO,CAAC,GAAGvB,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACwB,KAAK,EAAEC,QAAQ,CAAC,GAAGzB,QAAQ,CAAC,IAAI,CAAC;EAExC,MAAM0B,YAAY,GAAIhB,EAAE,IAAK;IAC3BD,cAAc,CAACC,EAAE,CAAC,CAACiB,KAAK,CAAEC,GAAG,IAAK;MAChCC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;IAClB,CAAC,CAAC;IAEFL,OAAO,CAAEQ,SAAS,IAAK;MACrB,OAAOA,SAAS,CAACC,MAAM,CAAEnB,QAAQ,IAAKA,QAAQ,CAACC,GAAG,KAAKJ,EAAE,CAAC;IAC5D,CAAC,CAAC;EACJ,CAAC;EAGDX,SAAS,CAAC,MAAM;IACd,MAAMkC,UAAU,GAAG,IAAIC,eAAe,EAAE;IAExC/B,cAAc,CAAC8B,UAAU,CAAC7B,MAAM,CAAC,CAC9BE,IAAI,CAAEyB,SAAS,IAAK;MACnBV,UAAU,CAAC,KAAK,CAAC;MACjBE,OAAO,CAACQ,SAAS,CAAC;IACpB,CAAC,CAAC,CACDJ,KAAK,CAAEQ,KAAK,IAAK;MAChB,IAAIA,KAAK,CAACC,IAAI,KAAK,YAAY,EAAE;QAC/Bb,OAAO,CAAC,IAAI,CAAC;QACb,MAAMY,KAAK;MACb;IACF,CAAC,CAAC;IAEJ,OAAO,MAAMF,UAAU,CAACI,KAAK,EAAE;EACjC,CAAC,EAAE,EAAE,CAAC;EAEN,IAAIjB,OAAO,EAAE;IACX,oBAAO,QAAC,OAAO;MAAA;MAAA;MAAA;IAAA,QAAG;EACpB;EAEA,oBAAO,QAAC,aAAa;IAAC,SAAS,EAAEE,IAAK;IAAC,QAAQ,EAAEI;EAAa;IAAA;IAAA;IAAA;EAAA,QAAG;AACnE,CAAC;AAAC,GAvCIP,YAAY;AAAA,KAAZA,YAAY;AAyClB,eAAeA,YAAY;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}