{"ast":null,"code":"var _jsxFileName = \"/Users/rubyzli/Desktop/employee-exercise/client/src/Pages/EmployeeUpdater.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport EmployeeForm from \"../Components/EmployeeForm\";\nimport Loading from \"../Components/Loading\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst updateEmployee = employee => {\n  return fetch(`/api/employees/${employee._id}`, {\n    method: \"PATCH\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(employee)\n  }).then(res => res.json());\n};\nconst fetchEmployee = id => {\n  return fetch(`/api/employees/${id}`).then(res => res.json());\n};\nconst fetchEquipment = () => {\n  return fetch('/api/equipment').then(res => res.json());\n};\nconst EmployeeUpdater = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [employee, setEmployee] = useState(null);\n  const [updateLoading, setUpdateLoading] = useState(false);\n  const [employeeLoading, setEmployeeLoading] = useState(true);\n  const [equipment, setEquipment] = useState(null);\n  useEffect(() => {\n    setEmployeeLoading(true);\n    fetchEquipment().then(equipment => {\n      setEquipment(equipment);\n      setEmployeeLoading(false);\n    });\n    fetchEmployee(id).then(employee => {\n      setEmployee(employee);\n      setEmployeeLoading(false);\n    }).catch(error => {\n      throw error;\n    });\n  }, [id]);\n  const handleUpdateEmployee = employee => {\n    setUpdateLoading(true);\n    updateEmployee(employee).then(() => {\n      navigate(\"/\");\n    }).catch(error => {\n      throw error;\n    }).finally(() => {\n      setUpdateLoading(false);\n    });\n  };\n  if (employeeLoading) {\n    return /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(EmployeeForm, {\n    equipment: equipment,\n    employee: employee,\n    onSave: handleUpdateEmployee,\n    disabled: updateLoading,\n    onCancel: () => navigate(\"/\")\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n};\n_s(EmployeeUpdater, \"4jyjL+9ksD+naq/GxIcGn68XS7w=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = EmployeeUpdater;\nexport default EmployeeUpdater;\nvar _c;\n$RefreshReg$(_c, \"EmployeeUpdater\");","map":{"version":3,"names":["useEffect","useState","useNavigate","useParams","EmployeeForm","Loading","updateEmployee","employee","fetch","_id","method","headers","body","JSON","stringify","then","res","json","fetchEmployee","id","fetchEquipment","EmployeeUpdater","navigate","setEmployee","updateLoading","setUpdateLoading","employeeLoading","setEmployeeLoading","equipment","setEquipment","catch","error","handleUpdateEmployee","finally"],"sources":["/Users/rubyzli/Desktop/employee-exercise/client/src/Pages/EmployeeUpdater.jsx"],"sourcesContent":["import { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport EmployeeForm from \"../Components/EmployeeForm\";\nimport Loading from \"../Components/Loading\";\n\nconst updateEmployee = (employee) => {\n  return fetch(`/api/employees/${employee._id}`, {\n    method: \"PATCH\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(employee),\n  }).then((res) => res.json());\n};\n\nconst fetchEmployee = (id) => {\n  return fetch(`/api/employees/${id}`).then((res) => res.json());\n};\nconst fetchEquipment = () => {\n  return fetch('/api/equipment').then((res => res.json()))\n}\n\nconst EmployeeUpdater = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  \n  const [employee, setEmployee] = useState(null);\n  const [updateLoading, setUpdateLoading] = useState(false);\n  const [employeeLoading, setEmployeeLoading] = useState(true);\n  const [equipment, setEquipment] = useState(null)\n\n  useEffect(() => {\n    setEmployeeLoading(true);\n    fetchEquipment()\n    .then((equipment => {\n      setEquipment(equipment)\n    \n      setEmployeeLoading(false);\n    }))\n\n    fetchEmployee(id)\n      .then((employee) => {\n        setEmployee(employee);\n        setEmployeeLoading(false);\n      })\n      .catch((error) => {\n        throw error;\n      });\n\n     \n  }, [id]);\n  \n \n  const handleUpdateEmployee = (employee) => {\n    setUpdateLoading(true);\n    updateEmployee(employee)\n      .then(() => {\n        navigate(\"/\");\n      })\n      .catch((error) => {\n        throw error;\n      })\n      .finally(() => {\n        setUpdateLoading(false);\n      });\n  };\n  \n  if (employeeLoading) {\n    return <Loading />;\n  }\n\n  return (\n    <EmployeeForm\n      equipment={equipment}\n      employee={employee}\n      onSave={handleUpdateEmployee}\n      disabled={updateLoading}\n      onCancel={() => navigate(\"/\")}\n    />\n  );\n};\n\nexport default EmployeeUpdater;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}